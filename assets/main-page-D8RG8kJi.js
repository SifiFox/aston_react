import{h as a,j as e,L as j,C as f,i as C,k as R,I as y,s as k,R as E,l as F,H as M,c as l,E as P,a as S,M as T,P as _}from"./index-gxMem5cA.js";import{u as b}from"./use-favourites-CqMqZtMW.js";import{u as N}from"./use-history-cl3w-Khl.js";const w=(r,s)=>{const o=a.useRef(null);return a.useCallback((...n)=>{o.current&&clearTimeout(o.current),o.current=setTimeout(()=>{r(...n)},s)},[r,s])},H=({movies:r})=>e.jsx(e.Fragment,{children:r.map(s=>e.jsx(j,{to:`/${s.kinopoiskId}`,children:e.jsx(f,{style:{height:350,width:200},cover:e.jsx("img",{alt:"example",src:s.posterUrlPreview})})},s.kinopoiskId))}),I="_searchWrapper_ei95m_1",W="_result_ei95m_8",u={searchWrapper:I,result:W},L=({data:r})=>{const{movies:s}=r;return e.jsxs("div",{className:u.result,children:[s.length===0&&e.jsx("div",{children:"Ни одного фильма не найдено"}),s.length>0&&e.jsx(H,{movies:s})]})},{Search:$}=y,z=()=>{const[r,s]=a.useState(null),[o,n]=a.useState(!1),[t,{data:i}]=C(),p=R(),m=(c,B,v)=>{const{source:x}=v;x==="input"&&(k(c).catch(g=>{console.log(g)}),p(`${E.search}/${c}`))},d=w(c=>{t(c.currentTarget.value),c.currentTarget.value?n(!0):n(!1)},800);return a.useEffect(()=>{i&&s(i)},[i]),e.jsxs("div",{className:u.searchWrapper,children:[e.jsx($,{placeholder:"Введите название фильма",allowClear:!0,size:"large",onSearch:m,onChange:d}),r&&o&&e.jsx(L,{data:r})]})},h=({title:r})=>{const{movies:s,moviesCount:o,isError:n}=F(void 0,{selectFromResult:({data:t,isError:i})=>({movies:t==null?void 0:t.movies,moviesCount:t==null?void 0:t.moviesCount,isError:i})});return b(),N(),e.jsxs(e.Fragment,{children:[e.jsx(M,{}),e.jsxs("div",{className:l.pageWrapper,children:[e.jsx("h1",{className:l.pageTitle,children:r}),e.jsx("div",{className:l.pageContent,children:e.jsxs(P,{FallbackComponent:S,children:[e.jsx(z,{}),e.jsx(T,{movies:s,moviesCount:o,isError:n})]})})]})]})};h.propTypes={title:_.string.isRequired};const A=a.memo(h);export{A as default};
